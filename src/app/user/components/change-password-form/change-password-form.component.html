<form [formGroup]="form" (ngSubmit)="submit()">
  <div class="mb-4 grid grid-cols-1 gap-4">
    <pet-form-password
      label="Contraseña actual"
      placeholder="Introduce tu contraseña"
      autocomplete="current-password"
      [control]="currentPasswordControl.control!"
      [touched]="currentPasswordControl.state.touched"
      [invalid]="currentPasswordControl.state.invalid"
      [errors]="currentPasswordControl.state.errors"
      [customErrors]="{
        required: 'La contraseña actual es obligatoria.',
      }"
    />

    <pet-form-password
      label="Nueva contraseña"
      placeholder="Introduce tu nueva contraseña"
      autocomplete="new-password"
      [control]="newPasswordControl.control!"
      [touched]="newPasswordControl.state.touched"
      [invalid]="newPasswordControl.state.invalid"
      [errors]="newPasswordControl.state.errors"
      [customErrors]="{
        required: 'La nueva contraseña es obligatoria.',
        minlength: 'Debe tener al menos 8 caracteres.',
        pattern:
          'Debe incluir una mayúscula, una minúscula, un número y un carácter especial.',
        sameAsCurrent: 'La nueva contraseña no puede ser igual a la actual.',
      }"
    />

    <pet-form-password
      label="Confirmar nueva contraseña"
      placeholder="Repite tu nueva contraseña"
      autocomplete="new-password"
      [control]="confirmPasswordControl.control!"
      [touched]="confirmPasswordControl.state.touched"
      [invalid]="confirmPasswordControl.state.invalid"
      [errors]="confirmPasswordControl.state.errors"
      [customErrors]="{
        required: 'La confirmación es obligatoria.',
        mismatch: 'Las contraseñas no coinciden.',
      }"
    />
  </div>

  <pet-button
    class="w-full"
    [isDisabled]="form.invalid || isLoading()"
    [isLoading]="isLoading()"
    color="primary"
    loadingText="Guardando..."
    size="medium"
    styling="filled"
    text="Cambiar contraseña"
    type="submit"
  />
</form>
