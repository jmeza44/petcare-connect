<form (ngSubmit)="submit()" [formGroup]="form">
  <div class="mb-4 grid grid-cols-1 gap-4 md:grid-cols-2">
    <div>
      <label class="block text-sm font-medium text-gray-700"
        >Tipo de identificación</label
        >
        <select
        [class.border-red-500]="
          f['identificationType'].invalid && f['identificationType'].touched
        "
          autocomplete="off"
          class="line mt-2 h-[50px] w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
          formControlName="identificationType"
          >
          <option disabled>Selecciona un tipo</option>
          <option [value]="identificationTypes.CedulaCiudadania">
            Cédula de ciudadanía
          </option>
          <option [value]="identificationTypes.CedulaExtranjeria">
            Cédula de extranjería
          </option>
          <option [value]="identificationTypes.TarjetaIdentidad">
            Tarjeta de identidad
          </option>
          <option [value]="identificationTypes.Passport">Pasaporte</option>
          <option [value]="identificationTypes.Other">Otro</option>
        </select>
        @if (
          f['identificationType']?.invalid && f['identificationType']?.touched
          ) {
          <div
            class="text-sm text-red-500"
            >
            El tipo de identificación es obligatorio.
          </div>
        }
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700"
          >Número de identificación</label
          >
          <input
        [class.border-red-500]="
          f['identificationNumber'].invalid && f['identificationNumber'].touched
        "
            autocomplete="off"
            class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
            formControlName="identificationNumber"
            mask="0*"
            placeholder="10024442626"
            type="text"
            />
            @if (
              f['identificationNumber']?.invalid &&
              f['identificationNumber']?.touched
              ) {
              <div
                class="text-sm text-red-500"
                >
                @if (f['identificationNumber']?.errors?.['required']) {
                  <div>
                    El número de identificación es obligatorio.
                  </div>
                }
                @if (f['identificationNumber']?.errors?.['pattern']) {
                  <div>
                    Solo se permiten números.
                  </div>
                }
              </div>
            }
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Nombre</label>
            <input
        [class.border-red-500]="
          f['firstName'].invalid && f['firstName'].touched
        "
              autocomplete="given-name"
              class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
              formControlName="firstName"
              type="text"
              />
              @if (f['firstName']?.invalid && f['firstName']?.touched) {
                <div
                  class="text-sm text-red-500"
                  >
                  @if (f['firstName']?.errors?.['required']) {
                    <div>
                      El nombre es obligatorio.
                    </div>
                  }
                  @if (f['firstName']?.errors?.['maxlength']) {
                    <div>
                      Máximo 50 caracteres permitidos.
                    </div>
                  }
                </div>
              }
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700">Apellido</label>
              <input
                [class.border-red-500]="f['lastName'].invalid && f['lastName'].touched"
                autocomplete="family-name"
                class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
                formControlName="lastName"
                type="text"
                />
                @if (f['lastName']?.invalid && f['lastName']?.touched) {
                  <div
                    class="text-sm text-red-500"
                    >
                    @if (f['lastName']?.errors?.['required']) {
                      <div>
                        El apellido es obligatorio.
                      </div>
                    }
                    @if (f['lastName']?.errors?.['maxlength']) {
                      <div>
                        Máximo 50 caracteres permitidos.
                      </div>
                    }
                  </div>
                }
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Correo electrónico</label
                  >
                  <input
                    [class.border-red-500]="f['email'].invalid && f['email'].touched"
                    [class.border-red-500]="f['email'].invalid && f['email'].touched"
                    autocomplete="email"
                    class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
                    formControlName="email"
                    placeholder="your.email@domain.com"
                    type="email"
                    />
                    @if (f['email']?.invalid && f['email']?.touched) {
                      <div
                        class="text-sm text-red-500"
                        >
                        @if (f['email']?.errors?.['required']) {
                          <div>
                            El correo electrónico es obligatorio.
                          </div>
                        }
                        @if (f['email']?.errors?.['email']) {
                          <div>
                            Introduce un correo electrónico válido.
                          </div>
                        }
                      </div>
                    }
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700"
                      >Número de celular</label
                      >
                      <input
        [class.border-red-500]="
          f['cellphoneNumber'].invalid && f['cellphoneNumber'].touched
        "
                        autocomplete="tel"
                        class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0 focus-visible:ring-2 focus-visible:ring-primary-500"
                        formControlName="cellphoneNumber"
                        mask="000-000-0000"
                        placeholder="300-123-4567"
                        type="tel"
                        />
                        @if (f['cellphoneNumber']?.invalid && f['cellphoneNumber']?.touched) {
                          <div
                            class="text-sm text-red-500"
                            >
                            @if (f['cellphoneNumber']?.errors?.['required']) {
                              <div>
                                El número de celular es obligatorio.
                              </div>
                            }
                          </div>
                        }
                      </div>
                    </div>

                    <div class="mb-4 grid grid-cols-1 gap-4 md:grid-cols-2">
                      <div>
                        <label class="block text-sm font-medium text-gray-700">Contraseña</label>
                        <input
                          [class.border-red-500]="f['password'].invalid && f['password'].touched"
                          autocomplete="new-password"
                          class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0"
                          formControlName="password"
                          type="password"
                          />
                          @if (f['password']?.invalid && f['password']?.touched) {
                            <div
                              class="text-sm text-red-500"
                              >
                              @if (f['password']?.errors?.['required']) {
                                <div>
                                  La contraseña es obligatoria.
                                </div>
                              }
                              @if (f['password']?.errors?.['minlength']) {
                                <div>
                                  Debe tener al menos 8 caracteres.
                                </div>
                              }
                              @if (f['password']?.errors?.['pattern']) {
                                <div>
                                  Debe incluir una mayúscula, una minúscula, un número y un carácter
                                  especial.
                                </div>
                              }
                            </div>
                          }
                        </div>

                        <div>
                          <label class="block text-sm font-medium text-gray-700"
                            >Confirmar contraseña</label
                            >
                            <input
        [class.border-red-500]="
          f['confirmPassword'].invalid && f['confirmPassword'].touched
        "
                              autocomplete="new-password"
                              class="mt-2 w-full rounded-md border border-gray-300 p-3 focus:border-gray-300 focus:ring-2 focus:ring-primary-500 focus-visible:outline-0"
                              formControlName="confirmPassword"
                              type="password"
                              />
                              @if (f['confirmPassword']?.invalid && f['confirmPassword']?.touched) {
                                <div
                                  class="text-sm text-red-500"
                                  >
                                  @if (f['confirmPassword']?.errors?.['required']) {
                                    <div>
                                      La confirmación de contraseña es obligatoria.
                                    </div>
                                  }
                                  @if (f['confirmPassword']?.errors?.['mismatch']) {
                                    <div>
                                      Las contraseñas no coinciden.
                                    </div>
                                  }
                                </div>
                              }
                            </div>
                          </div>

                          @if (errorMessage) {
                            <div class="mb-4 text-sm text-red-500">
                              {{ errorMessage }}
                            </div>
                          }

                          <pet-button
                            [customClass]="'w-full'"
                            [isDisabled]="form.invalid || isLoading"
                            [isLoading]="isLoading"
                            color="primary"
                            loadingText="Registrando..."
                            size="medium"
                            styling="filled"
                            text="Registrarse"
                            type="submit"
                            >
                          </pet-button>
                        </form>
